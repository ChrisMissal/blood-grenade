{
  "version": 1,
  "rulesets": [
    {
      "name": "main-branch-protection",
      "target": "branch",
      "enforcement": "active",
      "conditions": {
        "ref_name": {
          "include": ["refs/heads/main"],
          "exclude": []
        }
      },
      "rules": [
        {
          "type": "deletion"
        },
        {
          "type": "non_fast_forward"
        },
        {
          "type": "pull_request",
          "parameters": {
            "dismiss_stale_reviews_on_push": true,
            "require_code_owner_review": false,
            "require_last_push_approval": true,
            "required_approving_review_count": 1,
            "required_review_thread_resolution": true
          }
        },
        {
          "type": "required_status_checks",
          "parameters": {
            "required_checks": [
              { "context": "Validate Conventional Commits" },
              { "context": "Validate All Commits" },
              { "context": "Build Workspace" }
            ],
            "strict_required_status_checks_policy": true
          }
        }
      ],
      "bypass_actors": []
    },
    {
      "name": "branch-name-policy",
      "target": "branch",
      "enforcement": "active",
      "conditions": {
        "ref_name": {
          "include": ["refs/heads/*"],
          "exclude": ["refs/heads/main"]
        }
      },
      "rules": [
        {
          "type": "branch_name_pattern",
          "parameters": {
            "operator": "regex",
            "pattern": "^(env/(dev|staging|prod)|releases/.+|feat/.+|fix/.+|docs/.+|chore/.+|refactor/.+|test/.+|ci/.+|perf/.+|build/.+|style/.+|revert/.+)$"
          }
        }
      ],
      "bypass_actors": []
    }
  ]
}
